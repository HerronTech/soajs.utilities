#######################################################
## Haproxy configuration
#######################################################
global
        log     /dev/log    local0
        log     /dev/log    local1 notice
        chroot  /var/lib/haproxy
        user    haproxy
        group   haproxy
        maxconn 1024
        daemon

defaults
        log     global
        mode    http
        option  httplog
        option  dontlognull

#
# urac
#
listen urac_proxy:4001
        mode http
        balance roundrobin
        server services_01 192.168.0.20:4001 check inter 1000 rise 2 fall 1 port 5001
        server services_01 192.168.0.21:4001 check inter 1000 rise 2 fall 1 port 5001
        server services_01 192.168.0.22:4001 check inter 1000 rise 2 fall 1 port 5001

#
# dashboard
#
listen dashboard_proxy:4003
        mode http
        balance roundrobin
        server services_01 192.168.0.20:4003 check inter 1000 rise 2 fall 1 port 5003
        server services_01 192.168.0.21:4003 check inter 1000 rise 2 fall 1 port 5003
        server services_01 192.168.0.22:4003 check inter 1000 rise 2 fall 1 port 5003